# 数据结构

## 节点

一个节点的序号为 30 比特的数字，其中偶数的称为 u 节点，奇数的称为 v 节点，在存储时只记录前 29 比特。

29 比特分为 7 位、7 位、15 位的前缀、中缀、后缀，将其值分别记作 x、y、z。

位数对照：
```
十位：2222222 2211111 111110000000000
个位：8765432 1098765 432109876543210
     XXXXXXX YYYYYYY ZZZZZZZZZZZZZZZ
```

## 边

每条边用其连接的 u 节点和 v 节点表示，即需要 29 + 29 位。在剪枝过程中两个节点的前缀 `ux`、`vx` 可以通过其在 `buckets` 矩阵中的位置下标得到，因此一条边仅需记录 `uy`、`uz`、`vy`、`vz` 的值。

#### 在 `trimedges` 函数中

在 `trimedges` 函数中一条边用 5 个字节 = 40 比特记录。以当前处理 v 节点为例，初始时一条边记录为 `( uy后3位 || uz全15位 || vy全7位 || vz全15位 )`。在前后两条边的 `uy` 值相差8以内时可以通过差值累加恢复出完整的 `uy` 值。此后边被放入临时存储 `tbuckets[id][vy]` 中，其记录形式改变为 `( ux后3位 || uy全7位 || uz全15位 || vz全15位 )`。在前后两条边的 `ux` 值相差8以内时可以通过差值累加恢复出完整的 `ux` 值。
